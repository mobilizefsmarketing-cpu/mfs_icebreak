<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>모빌라이즈파이낸셜서비스코리아 "아이스 브레이커"</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at center, #041630, #000);
    color: white;
    font-family: "Pretendard", sans-serif;
    text-align: center;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: rgba(0,0,0,0.15);
  }

  #startButton {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 22px;
    padding: 14px 28px;
    background: linear-gradient(135deg, #1e90ff, #00bfff);
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    transition: transform 0.2s, box-shadow 0.2s;
    z-index: 10;
  }
  #startButton:hover {
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow: 0 6px 14px rgba(0,0,0,0.4);
  }

  #finalResult {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.85);
    color: white;
    font-size: 24px;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  #finalResult button {
    margin-top: 20px;
    padding: 10px 24px;
    font-size: 18px;
    background: #1e90ff;
    border: none;
    border-radius: 10px;
    color: white;
    cursor: pointer;
  }
</style>
</head>
<body>
  <canvas id="gameCanvas" width="480" height="640"></canvas>
  <button id="startButton">게임 시작하기</button>

  <div id="finalResult">
    <div id="finalText"></div>
    <button onclick="location.reload()">다시하기</button>
  </div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
let width = canvas.width;
let height = canvas.height;

let paddle = { x: width / 2 - 40, y: height - 30, w: 80, h: 10, speed: 7 };
let ball = { x: width / 2, y: height - 40, dx: 2.5, dy: -2.5, r: 8 };
let bricks = [];
let rows = 4, cols = 5;
let score = 0, lives = 3;
let gameRunning = false;

function createLogoBricks() {
  bricks = [];
  let bw = 80, bh = 25, padding = 10, offsetX = (width - (bw + padding) * cols) / 2;
  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      bricks.push({ x: offsetX + c * (bw + padding), y: 60 + r * (bh + padding), w: bw, h: bh, visible: true });
    }
  }
}
createLogoBricks();

function drawPaddle() {
  ctx.fillStyle = "#00bfff";
  ctx.fillRect(paddle.x, paddle.y, paddle.w, paddle.h);
}
function drawBall() {
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
  ctx.fillStyle = "#fff";
  ctx.fill();
  ctx.closePath();
}
function drawBricks() {
  bricks.forEach(b => {
    if (b.visible) {
      ctx.fillStyle = "#1e90ff";
      ctx.fillRect(b.x, b.y, b.w, b.h);
    }
  });
}
function drawScore() {
  ctx.font = "16px Pretendard";
  ctx.fillText(`점수: ${score}`, 10, 20);
  ctx.fillText(`라이프: ${lives}`, width - 100, 20);
}

function movePaddle(e) {
  let rect = canvas.getBoundingClientRect();
  let mouseX = e.clientX - rect.left;
  paddle.x = Math.max(0, Math.min(mouseX - paddle.w / 2, width - paddle.w));
}
canvas.addEventListener("mousemove", movePaddle);

function update() {
  if (!gameRunning) return;
  ball.x += ball.dx;
  ball.y += ball.dy;

  if (ball.x + ball.r > width || ball.x - ball.r < 0) ball.dx *= -1;
  if (ball.y - ball.r < 0) ball.dy *= -1;

  if (
    ball.y + ball.r > paddle.y &&
    ball.x > paddle.x &&
    ball.x < paddle.x + paddle.w
  ) {
    ball.dy *= -1;
  }

  bricks.forEach(b => {
    if (b.visible) {
      if (
        ball.x > b.x &&
        ball.x < b.x + b.w &&
        ball.y - ball.r < b.y + b.h &&
        ball.y + ball.r > b.y
      ) {
        ball.dy *= -1;
        b.visible = false;
        score += 10;
      }
    }
  });

  if (ball.y + ball.r > height) {
    lives--;
    if (lives > 0) {
      ball.x = width / 2;
      ball.y = height - 40;
      ball.dy = -2.5;
    } else {
      endGame();
    }
  }

  ctx.clearRect(0, 0, width, height);
  drawPaddle();
  drawBall();
  drawBricks();
  drawScore();

  if (bricks.every(b => !b.visible)) {
    endGame();
  }

  requestAnimationFrame(update);
}

function startGame() {
  gameRunning = true;
  update();
}

function endGame() {
  gameRunning = false;
  document.getElementById("finalText").innerHTML =
    `게임 종료!<br><br>최종 점수: ${score}<br>남은 라이프: ${lives}`;
  document.getElementById("finalResult").style.display = "flex";
}

document.getElementById("startButton").addEventListener("click", () => {
  document.getElementById("startButton").style.display = "none";
  startGame();
});
</script>
</body>
</html>
