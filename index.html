<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>ëª¨ë¹Œë¼ì´ì¦ˆíŒŒì´ë‚¸ì…œì„œë¹„ìŠ¤ ë²½ëŒê¹¨ê¸° í€´ì¦ˆ ğŸ®</title> 
<style>
  body {
    margin: 0;
    background: radial-gradient(circle at 30% 30%, #04122a, #000);
    color: white;
    font-family: "Pretendard", sans-serif;
    overflow: hidden;
    touch-action: none;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
  }

  canvas {
    display: block;
    background: radial-gradient(circle at 30% 30%, #0f2b52, #000);
    border: 3px solid #3af;
    border-radius: 16px;
    box-shadow: 0 0 40px rgba(0, 180, 255, 0.4);
    margin-top: 5vh;
  }

  #status {
    position: fixed;
    top: 10px;
    right: 12px;
    font-size: 1em;
    background: rgba(0,0,0,0.5);
    padding: 6px 10px;
    border-radius: 12px;
    z-index: 100;
  }

  /* ğŸ¬ ì¸íŠ¸ë¡œ ë¡œê³  í™”ë©´ */
  #logoScreen {
    position: fixed;
    bottom: 30px;
    left: 0;
    width: 100%;
    height: 100%;
    background: black;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    z-index: 20;
  }

  #logoScreen h1 {
    color: #3af;
    font-size: 1.6em;
    text-align: center;
    opacity: 0;
    animation: fadeInStay 3s ease forwards;
  }

  @keyframes fadeInStay {
    0% { opacity: 0; transform: scale(1); }
    20% { opacity: 1; transform: scale(1.02); }
    80% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(1); }
  }

  /* ğŸ¯ í€´ì¦ˆ íŒì—… */
  #quizPopup {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
    z-index: 10;
  }

  #quizPopup .box {
    background: white;
    color: #111;
    border-radius: 16px;
    padding: 20px;
    width: 90%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 0 20px rgba(255,255,255,0.5);
    animation: popup 0.4s ease;
  }

  @keyframes popup {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  #quizPopup button {
    padding: 10px 18px;
    margin: 8px;
    border: none;
    border-radius: 8px;
    font-size: 1.1em;
    cursor: pointer;
  }

  #quizPopup .o { background: #3af; color: white; }
  #quizPopup .x { background: #f33; color: white; }
  #quizPopup .next { background: #3c3; color: white; display: none; }

  #timer {
    font-size: 1.2em;
    margin-bottom: 10px;
    color: #007bff;
    font-weight: bold;
  }

  /* âœ¨ í€´ì¦ˆ í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ ë° ê°€ë…ì„± */
  #quizQuestion {
    white-space: pre-line;
    word-break: keep-all;
    line-height: 1.5em;
    margin-bottom: 10px;
  }

  /* ğŸ® ê²Œì„ ì˜¤ë²„ í™”ë©´ */
  #gameOverScreen {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    color: white;
    z-index: 30;
    text-align: center;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }

  #gameOverScreen h2 { font-size: 2em; margin-bottom: 10px; }
  #gameOverScreen p { font-size: 1.2em; margin: 6px 0; }
  #gameOverScreen button {
    margin-top: 15px;
    background: #3af;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 10px;
    font-size: 1.1em;
    cursor: pointer;
  }
</style>
</head>
<body>
<div id="logoScreen"><h1>ëª¨ë¹Œë¼ì´ì¦ˆíŒŒì´ë‚¸ì…œì„œë¹„ìŠ¤ ì œê³µ</h1></div>
<canvas id="gameCanvas"></canvas>
<div id="status">ì ìˆ˜: 0 | ë¼ì´í”„: 3</div>

<!-- ğŸ¯ í€´ì¦ˆ íŒì—… -->
<div id="quizPopup">
  <div class="box">
    <div id="timer">ë‚¨ì€ ì‹œê°„: 10ì´ˆ</div>
    <h2 id="quizQuestion">ì§ˆë¬¸ì´ ë‚˜ì˜µë‹ˆë‹¤</h2>
    <div>
      <button class="o" onclick="handleAnswer(true)">O</button>
      <button class="x" onclick="handleAnswer(false)">X</button>
    </div>
    <button class="next" id="nextQuizBtn" onclick="closeQuiz()">ê³„ì†í•˜ê¸° â–¶</button>
  </div>
</div>

<!-- ğŸ® ê²Œì„ ì˜¤ë²„ í™”ë©´ -->
<div id="gameOverScreen">
  <h2>ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤ ğŸ‰</h2>
  <p id="finalScore">í˜„ì¬ ì ìˆ˜: 0</p>
  <p id="finalLives">ë‚¨ì€ ë¼ì´í”„: 0</p>
  <button onclick="location.reload()">ì¬ë„ì „í•˜ê¸°</button>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const status = document.getElementById("status");

function resizeCanvas() {
  const scale = Math.min(window.innerWidth / 800, window.innerHeight / 600);
  canvas.width = 800 * scale;
  canvas.height = 600 * scale;
  ctx.scale(scale, scale);
}
resizeCanvas();
window.addEventListener("resize", () => location.reload());

let state = { running: false, paused: false, score: 0, lives: 3 };
const paddle = { width: 90, height: 15, x: 355, y: 560, speed: 9, movingLeft: false, movingRight: false };
const ball = { x: 400, y: 540, dx: 3.5, dy: -3.5, radius: 12 };
let bricks = [];

const quizList = [
  { q:"ê·¸ë‘ì½œë ˆì˜¤ìŠ¤ 26ë…„ ìƒì‚°ê¸°ì¤€\n3.3% ê¸ˆë¦¬ í• ë¶€ì›ê¸ˆì œí•œì€\n2500ë§Œì› ìˆë‹¤?", a:true },
  { q:"ëª¨ë¹Œë¼ì´ì¦ˆíŒŒì´ë‚¸ì…œì„œë¹„ìŠ¤ëŠ”\ní”„ë‘ìŠ¤ íšŒì‚¬ì´ë‹¤?", a:true },
  { q:"ì”ê°€ë³´ì¥ìƒí’ˆì€\nëª¨ë¹Œë¼ì´ì¦ˆíŒŒì´ë‚¸ì…œì„œë¹„ìŠ¤ì—ë§Œ\nìˆëŠ” í• ë¶€ìƒí’ˆì´ë‹¤?", a:false }
];
let currentQuiz=0, quizTimer, timeLeft=10;

function createLogoBricks(){
  const brickW=45, brickH=18;
  const cx=400, cy=200;
  const outer=200, inner=120;
  for(let y=60; y<360; y+=brickH+4){
    for(let x=60; x<740; x+=brickW+4){
      const dx=x-cx, dy=y-cy;
      const dist=Math.sqrt(dx*dx+dy*dy);
      const angle=Math.atan2(dy,dx);
      const circlePart = dist<outer && dist>inner && (angle<-0.5 || angle>0.5);
      const slash = Math.abs(dy+dx*0.5)<20;
      if(circlePart||slash) bricks.push({x,y,w:brickW,h:brickH,color:slash?"#ff3c00":"#00baff",visible:true});
    }
  }
}
createLogoBricks();

function drawBall(){
  const grad = ctx.createRadialGradient(ball.x, ball.y, 2, ball.x, ball.y, 14);
  grad.addColorStop(0,"#fff");
  grad.addColorStop(1,"#3af");
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fillStyle=grad; ctx.fill(); ctx.closePath();
}
function drawPaddle(){
  const grad = ctx.createLinearGradient(paddle.x, paddle.y, paddle.x, paddle.y+paddle.height);
  grad.addColorStop(0,"#5cf"); grad.addColorStop(1,"#39f");
  ctx.beginPath();
  ctx.roundRect(paddle.x,paddle.y,paddle.width,paddle.height,8);
  ctx.fillStyle=grad; ctx.fill(); ctx.closePath();
}
function drawBricks(){
  bricks.forEach(b=>{
    if(b.visible){
      const grad = ctx.createLinearGradient(b.x,b.y,b.x+b.w,b.y+b.h);
      grad.addColorStop(0,b.color); grad.addColorStop(1,"#fff");
      ctx.beginPath(); ctx.roundRect(b.x,b.y,b.w,b.h,6);
      ctx.fillStyle=grad; ctx.fill(); ctx.closePath();
    }
  });
}
function collisionDetection(){
  bricks.forEach(b=>{
    if(b.visible && ball.x>b.x && ball.x<b.x+b.w && ball.y>b.y && ball.y<b.y+b.h){
      b.visible=false; ball.dy=-ball.dy; state.score+=100;
    }
  });
}
function resetBall(){ ball.x=400; ball.y=540; ball.dx=3.5; ball.dy=-3.5; }

document.addEventListener("mousemove", e=>{
  const rect = canvas.getBoundingClientRect();
  const relativeX = (e.clientX - rect.left) / (rect.width / 800);
  paddle.x = relativeX - paddle.width/2;
});

function startQuizLoop(){ setInterval(()=>{ if(state.running && !state.paused) showQuiz(); },5000); }
function showQuiz(){
  if(currentQuiz>=quizList.length) return;
  state.paused=true;
  const quiz=quizList[currentQuiz];
  document.getElementById("quizQuestion").innerText=quiz.q;
  document.getElementById("quizPopup").style.display="flex";
  document.getElementById("nextQuizBtn").style.display="none";
  document.querySelector("#quizPopup .o").style.display="inline-block";
  document.querySelector("#quizPopup .x").style.display="inline-block";
  timeLeft=10;
  document.getElementById("timer").innerText=`ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
  quizTimer=setInterval(()=>{
    timeLeft--;
    document.getElementById("timer").innerText=`ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
    if(timeLeft<=0){ clearInterval(quizTimer); handleAnswer(null,true); }
  },1000);
}
function handleAnswer(ans,timeout=false){
  clearInterval(quizTimer);
  const correct = quizList[currentQuiz].a;
  document.querySelector("#quizPopup .o").style.display="none";
  document.querySelector("#quizPopup .x").style.display="none";
  if(ans === correct && !timeout){
    alert("ì •ë‹µ! ğŸ‰ +200ì ");
    state.score += 200;
  } else {
    alert(timeout ? "ì‹œê°„ ì´ˆê³¼ ğŸ˜… -1ë¼ì´í”„, -100ì " : "í‹€ë ¸ì–´ìš” ğŸ˜… -1ë¼ì´í”„, -100ì ");
    state.score -= 100; state.lives--;
    ball.dx *= 1.1; ball.dy *= 1.1;
  }
  document.getElementById("nextQuizBtn").style.display="inline-block";
  updateStatus();
}
function closeQuiz(){
  document.getElementById("quizPopup").style.display="none";
  currentQuiz++; state.paused=false;
}
function updateStatus(){ status.innerText=`ì ìˆ˜: ${state.score} | ë¼ì´í”„: ${state.lives}`; }

function draw(){
  if(!state.running) return;
  ctx.clearRect(0,0,800,600);
  drawBricks(); drawBall(); drawPaddle();
  if(!state.paused){
    ball.x+=ball.dx; ball.y+=ball.dy;
    if(ball.x+ball.radius>800 || ball.x-ball.radius<0) ball.dx=-ball.dx;
    if(ball.y-ball.radius<0) ball.dy=-ball.dy;
    if(ball.y+ball.radius>paddle.y && ball.x>paddle.x && ball.x<paddle.x+paddle.width){
      let hitPos=(ball.x-(paddle.x+paddle.width/2))/(paddle.width/2);
      ball.dx=hitPos*4.5;
      ball.dy=-Math.abs(ball.dy);
    }
    if(ball.y>600){ state.lives--; updateStatus();
      if(state.lives<=0){
        showGameOver();
        state.running=false;
      } else resetBall();
    }
    collisionDetection();
  }
  updateStatus();
  requestAnimationFrame(draw);
}

function showGameOver(){
  const over=document.getElementById("gameOverScreen");
  document.getElementById("finalScore").innerText=`í˜„ì¬ ì ìˆ˜: ${state.score}`;
  document.getElementById("finalLives").innerText=`ë‚¨ì€ ë¼ì´í”„: ${state.lives}`;
  over.style.display="flex";
}

setTimeout(()=>{
  document.getElementById("logoScreen").style.display="none";
  state.running=true; draw(); startQuizLoop();
},3000);
</script>
</body>
</html>
